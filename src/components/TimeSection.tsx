import React from 'react'
import Time, { DateHelper } from '../helpers/dateHelper'
import styled from 'styled-components'
import { PoppinsBoldEndeavour20px, PoppinsMediumNobel20px, PoppinsNormalFiord14px } from '../styles/styledMixins'

type TimeSectionProps = {
    name: string,
    timeWindows: Time[];
    reservation?: Time;
    onTimeClick: (time: Time) => void;
}

const Header = styled.h1`
  ${ PoppinsBoldEndeavour20px };
  margin: 0;
`

const Button = styled.button`
  &:hover {
    background-color: var(--endeavour);
    color: white;
  }

  &.active {
    background-color: var(--endeavour);
    color: white;
  }

  cursor: pointer;
  background-color: white;
  padding: 8px 16px;
  ${ PoppinsNormalFiord14px };
  border: 1px solid var(--nobel);
  border-radius: 40px;
  transition: all .1s ease-in-out;
`

const TimeWindowWrapper = styled.div`
  display: flex;
  width: 100%;
  column-gap: 10px;
  flex-wrap: wrap;
  row-gap: 10px;
`

const NotFoundText = styled.p`
  ${ PoppinsMediumNobel20px };
  margin: 0;
`

const NotFoundWrapper = styled.div`
  display: flex;
  width: 100%;
  align-items: center;
  row-gap: .5em;
  flex-direction: column;
  user-select: none;
`

const NotFound = () => {
    return (
        <NotFoundWrapper>
            <svg width="34" height="38" viewBox="0 0 34 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                <mask id="path-1-inside-1_330_734" fill="white">
                    <path
                        d="M16.9999 30.6667C17.3296 30.6667 17.6518 30.569 17.9259 30.3859C18.2 30.2027 18.4136 29.9424 18.5397 29.6379C18.6659 29.3333 18.6989 28.9982 18.6346 28.6749C18.5703 28.3516 18.4115 28.0547 18.1784 27.8216C17.9453 27.5885 17.6484 27.4297 17.3251 27.3654C17.0018 27.3011 16.6667 27.3341 16.3621 27.4603C16.0576 27.5864 15.7973 27.8 15.6141 28.0741C15.431 28.3482 15.3333 28.6704 15.3333 29.0001C15.3333 29.4421 15.5088 29.866 15.8214 30.1786C16.134 30.4912 16.5579 30.6667 16.9999 30.6667ZM25.3333 30.6667C25.6629 30.6667 25.9851 30.569 26.2592 30.3859C26.5333 30.2027 26.7469 29.9424 26.8731 29.6379C26.9992 29.3333 27.0322 28.9982 26.9679 28.6749C26.9036 28.3516 26.7449 28.0547 26.5118 27.8216C26.2787 27.5885 25.9817 27.4297 25.6584 27.3654C25.3351 27.3011 25 27.3341 24.6954 27.4603C24.3909 27.5864 24.1306 27.8 23.9475 28.0741C23.7643 28.3482 23.6666 28.6704 23.6666 29.0001C23.6666 29.4421 23.8422 29.866 24.1547 30.1786C24.4673 30.4912 24.8912 30.6667 25.3333 30.6667ZM25.3333 24.0001C25.6629 24.0001 25.9851 23.9023 26.2592 23.7192C26.5333 23.5361 26.7469 23.2758 26.8731 22.9712C26.9992 22.6667 27.0322 22.3316 26.9679 22.0083C26.9036 21.685 26.7449 21.388 26.5118 21.1549C26.2787 20.9218 25.9817 20.7631 25.6584 20.6988C25.3351 20.6345 25 20.6675 24.6954 20.7936C24.3909 20.9198 24.1306 21.1334 23.9475 21.4075C23.7643 21.6815 23.6666 22.0038 23.6666 22.3334C23.6666 22.7754 23.8422 23.1994 24.1547 23.5119C24.4673 23.8245 24.8912 24.0001 25.3333 24.0001ZM16.9999 24.0001C17.3296 24.0001 17.6518 23.9023 17.9259 23.7192C18.2 23.5361 18.4136 23.2758 18.5397 22.9712C18.6659 22.6667 18.6989 22.3316 18.6346 22.0083C18.5703 21.685 18.4115 21.388 18.1784 21.1549C17.9453 20.9218 17.6484 20.7631 17.3251 20.6988C17.0018 20.6345 16.6667 20.6675 16.3621 20.7936C16.0576 20.9198 15.7973 21.1334 15.6141 21.4075C15.431 21.6815 15.3333 22.0038 15.3333 22.3334C15.3333 22.7754 15.5088 23.1994 15.8214 23.5119C16.134 23.8245 16.5579 24.0001 16.9999 24.0001ZM28.6666 4.00008H26.9999V2.33341C26.9999 1.89139 26.8243 1.46746 26.5118 1.1549C26.1992 0.842343 25.7753 0.666748 25.3333 0.666748C24.8912 0.666748 24.4673 0.842343 24.1547 1.1549C23.8422 1.46746 23.6666 1.89139 23.6666 2.33341V4.00008H10.3333V2.33341C10.3333 1.89139 10.1577 1.46746 9.8451 1.1549C9.53254 0.842343 9.10861 0.666748 8.66659 0.666748C8.22456 0.666748 7.80064 0.842343 7.48807 1.1549C7.17551 1.46746 6.99992 1.89139 6.99992 2.33341V4.00008H5.33325C4.00717 4.00008 2.7354 4.52687 1.79772 5.46455C0.860036 6.40223 0.333252 7.674 0.333252 9.00008V32.3334C0.333252 33.6595 0.860036 34.9313 1.79772 35.8689C2.7354 36.8066 4.00717 37.3334 5.33325 37.3334H28.6666C29.9927 37.3334 31.2644 36.8066 32.2021 35.8689C33.1398 34.9313 33.6666 33.6595 33.6666 32.3334V9.00008C33.6666 7.674 33.1398 6.40223 32.2021 5.46455C31.2644 4.52687 29.9927 4.00008 28.6666 4.00008ZM30.3333 32.3334C30.3333 32.7754 30.1577 33.1994 29.8451 33.5119C29.5325 33.8245 29.1086 34.0001 28.6666 34.0001H5.33325C4.89122 34.0001 4.4673 33.8245 4.15474 33.5119C3.84218 33.1994 3.66659 32.7754 3.66659 32.3334V17.3334H30.3333V32.3334ZM30.3333 14.0001H3.66659V9.00008C3.66659 8.55805 3.84218 8.13413 4.15474 7.82157C4.4673 7.50901 4.89122 7.33341 5.33325 7.33341H6.99992V9.00008C6.99992 9.44211 7.17551 9.86603 7.48807 10.1786C7.80064 10.4912 8.22456 10.6667 8.66659 10.6667C9.10861 10.6667 9.53254 10.4912 9.8451 10.1786C10.1577 9.86603 10.3333 9.44211 10.3333 9.00008V7.33341H23.6666V9.00008C23.6666 9.44211 23.8422 9.86603 24.1547 10.1786C24.4673 10.4912 24.8912 10.6667 25.3333 10.6667C25.7753 10.6667 26.1992 10.4912 26.5118 10.1786C26.8243 9.86603 26.9999 9.44211 26.9999 9.00008V7.33341H28.6666C29.1086 7.33341 29.5325 7.50901 29.8451 7.82157C30.1577 8.13413 30.3333 8.55805 30.3333 9.00008V14.0001ZM8.66659 24.0001C8.99622 24.0001 9.31845 23.9023 9.59254 23.7192C9.86662 23.5361 10.0802 23.2758 10.2064 22.9712C10.3325 22.6667 10.3655 22.3316 10.3012 22.0083C10.2369 21.685 10.0782 21.388 9.8451 21.1549C9.61201 20.9218 9.31504 20.7631 8.99174 20.6988C8.66843 20.6345 8.33332 20.6675 8.02878 20.7936C7.72424 20.9198 7.46394 21.1334 7.2808 21.4075C7.09767 21.6815 6.99992 22.0038 6.99992 22.3334C6.99992 22.7754 7.17551 23.1994 7.48807 23.5119C7.80064 23.8245 8.22456 24.0001 8.66659 24.0001ZM8.66659 30.6667C8.99622 30.6667 9.31845 30.569 9.59254 30.3859C9.86662 30.2027 10.0802 29.9424 10.2064 29.6379C10.3325 29.3333 10.3655 28.9982 10.3012 28.6749C10.2369 28.3516 10.0782 28.0547 9.8451 27.8216C9.61201 27.5885 9.31504 27.4297 8.99174 27.3654C8.66843 27.3011 8.33332 27.3341 8.02878 27.4603C7.72424 27.5864 7.46394 27.8 7.2808 28.0741C7.09767 28.3482 6.99992 28.6704 6.99992 29.0001C6.99992 29.4421 7.17551 29.866 7.48807 30.1786C7.80064 30.4912 8.22456 30.6667 8.66659 30.6667Z"/>
                </mask>
                <path
                    d="M16.9999 30.6667C17.3296 30.6667 17.6518 30.569 17.9259 30.3859C18.2 30.2027 18.4136 29.9424 18.5397 29.6379C18.6659 29.3333 18.6989 28.9982 18.6346 28.6749C18.5703 28.3516 18.4115 28.0547 18.1784 27.8216C17.9453 27.5885 17.6484 27.4297 17.3251 27.3654C17.0018 27.3011 16.6667 27.3341 16.3621 27.4603C16.0576 27.5864 15.7973 27.8 15.6141 28.0741C15.431 28.3482 15.3333 28.6704 15.3333 29.0001C15.3333 29.4421 15.5088 29.866 15.8214 30.1786C16.134 30.4912 16.5579 30.6667 16.9999 30.6667ZM25.3333 30.6667C25.6629 30.6667 25.9851 30.569 26.2592 30.3859C26.5333 30.2027 26.7469 29.9424 26.8731 29.6379C26.9992 29.3333 27.0322 28.9982 26.9679 28.6749C26.9036 28.3516 26.7449 28.0547 26.5118 27.8216C26.2787 27.5885 25.9817 27.4297 25.6584 27.3654C25.3351 27.3011 25 27.3341 24.6954 27.4603C24.3909 27.5864 24.1306 27.8 23.9475 28.0741C23.7643 28.3482 23.6666 28.6704 23.6666 29.0001C23.6666 29.4421 23.8422 29.866 24.1547 30.1786C24.4673 30.4912 24.8912 30.6667 25.3333 30.6667ZM25.3333 24.0001C25.6629 24.0001 25.9851 23.9023 26.2592 23.7192C26.5333 23.5361 26.7469 23.2758 26.8731 22.9712C26.9992 22.6667 27.0322 22.3316 26.9679 22.0083C26.9036 21.685 26.7449 21.388 26.5118 21.1549C26.2787 20.9218 25.9817 20.7631 25.6584 20.6988C25.3351 20.6345 25 20.6675 24.6954 20.7936C24.3909 20.9198 24.1306 21.1334 23.9475 21.4075C23.7643 21.6815 23.6666 22.0038 23.6666 22.3334C23.6666 22.7754 23.8422 23.1994 24.1547 23.5119C24.4673 23.8245 24.8912 24.0001 25.3333 24.0001ZM16.9999 24.0001C17.3296 24.0001 17.6518 23.9023 17.9259 23.7192C18.2 23.5361 18.4136 23.2758 18.5397 22.9712C18.6659 22.6667 18.6989 22.3316 18.6346 22.0083C18.5703 21.685 18.4115 21.388 18.1784 21.1549C17.9453 20.9218 17.6484 20.7631 17.3251 20.6988C17.0018 20.6345 16.6667 20.6675 16.3621 20.7936C16.0576 20.9198 15.7973 21.1334 15.6141 21.4075C15.431 21.6815 15.3333 22.0038 15.3333 22.3334C15.3333 22.7754 15.5088 23.1994 15.8214 23.5119C16.134 23.8245 16.5579 24.0001 16.9999 24.0001ZM28.6666 4.00008H26.9999V2.33341C26.9999 1.89139 26.8243 1.46746 26.5118 1.1549C26.1992 0.842343 25.7753 0.666748 25.3333 0.666748C24.8912 0.666748 24.4673 0.842343 24.1547 1.1549C23.8422 1.46746 23.6666 1.89139 23.6666 2.33341V4.00008H10.3333V2.33341C10.3333 1.89139 10.1577 1.46746 9.8451 1.1549C9.53254 0.842343 9.10861 0.666748 8.66659 0.666748C8.22456 0.666748 7.80064 0.842343 7.48807 1.1549C7.17551 1.46746 6.99992 1.89139 6.99992 2.33341V4.00008H5.33325C4.00717 4.00008 2.7354 4.52687 1.79772 5.46455C0.860036 6.40223 0.333252 7.674 0.333252 9.00008V32.3334C0.333252 33.6595 0.860036 34.9313 1.79772 35.8689C2.7354 36.8066 4.00717 37.3334 5.33325 37.3334H28.6666C29.9927 37.3334 31.2644 36.8066 32.2021 35.8689C33.1398 34.9313 33.6666 33.6595 33.6666 32.3334V9.00008C33.6666 7.674 33.1398 6.40223 32.2021 5.46455C31.2644 4.52687 29.9927 4.00008 28.6666 4.00008ZM30.3333 32.3334C30.3333 32.7754 30.1577 33.1994 29.8451 33.5119C29.5325 33.8245 29.1086 34.0001 28.6666 34.0001H5.33325C4.89122 34.0001 4.4673 33.8245 4.15474 33.5119C3.84218 33.1994 3.66659 32.7754 3.66659 32.3334V17.3334H30.3333V32.3334ZM30.3333 14.0001H3.66659V9.00008C3.66659 8.55805 3.84218 8.13413 4.15474 7.82157C4.4673 7.50901 4.89122 7.33341 5.33325 7.33341H6.99992V9.00008C6.99992 9.44211 7.17551 9.86603 7.48807 10.1786C7.80064 10.4912 8.22456 10.6667 8.66659 10.6667C9.10861 10.6667 9.53254 10.4912 9.8451 10.1786C10.1577 9.86603 10.3333 9.44211 10.3333 9.00008V7.33341H23.6666V9.00008C23.6666 9.44211 23.8422 9.86603 24.1547 10.1786C24.4673 10.4912 24.8912 10.6667 25.3333 10.6667C25.7753 10.6667 26.1992 10.4912 26.5118 10.1786C26.8243 9.86603 26.9999 9.44211 26.9999 9.00008V7.33341H28.6666C29.1086 7.33341 29.5325 7.50901 29.8451 7.82157C30.1577 8.13413 30.3333 8.55805 30.3333 9.00008V14.0001ZM8.66659 24.0001C8.99622 24.0001 9.31845 23.9023 9.59254 23.7192C9.86662 23.5361 10.0802 23.2758 10.2064 22.9712C10.3325 22.6667 10.3655 22.3316 10.3012 22.0083C10.2369 21.685 10.0782 21.388 9.8451 21.1549C9.61201 20.9218 9.31504 20.7631 8.99174 20.6988C8.66843 20.6345 8.33332 20.6675 8.02878 20.7936C7.72424 20.9198 7.46394 21.1334 7.2808 21.4075C7.09767 21.6815 6.99992 22.0038 6.99992 22.3334C6.99992 22.7754 7.17551 23.1994 7.48807 23.5119C7.80064 23.8245 8.22456 24.0001 8.66659 24.0001ZM8.66659 30.6667C8.99622 30.6667 9.31845 30.569 9.59254 30.3859C9.86662 30.2027 10.0802 29.9424 10.2064 29.6379C10.3325 29.3333 10.3655 28.9982 10.3012 28.6749C10.2369 28.3516 10.0782 28.0547 9.8451 27.8216C9.61201 27.5885 9.31504 27.4297 8.99174 27.3654C8.66843 27.3011 8.33332 27.3341 8.02878 27.4603C7.72424 27.5864 7.46394 27.8 7.2808 28.0741C7.09767 28.3482 6.99992 28.6704 6.99992 29.0001C6.99992 29.4421 7.17551 29.866 7.48807 30.1786C7.80064 30.4912 8.22456 30.6667 8.66659 30.6667Z"
                    fill="#9D9E9E" stroke="#9D9E9E" strokeWidth="2" mask="url(#path-1-inside-1_330_734)"/>
            </svg>
            <NotFoundText>Not Found</NotFoundText>
        </NotFoundWrapper>
    )
}

const TimeSection = (props: TimeSectionProps) => {
    return (
        <>
            <Header>
                { props.name }
            </Header>
            <TimeWindowWrapper>
                { props.timeWindows.length === 0 ? <NotFound/> :
                    props.timeWindows.map(time =>
                        <Button onClick={ () => props.onTimeClick(time) }
                                className={ props.reservation && props.reservation.hours === time.hours && props.reservation.minutes === time.minutes ? 'active' : '' }
                                key={ DateHelper.convertToString(time) }>
                            { DateHelper.convertToString(time) }
                        </Button>) }
            </TimeWindowWrapper>
        </>
    )
}

export default TimeSection